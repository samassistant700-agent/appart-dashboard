<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Recherche Appartement</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1>üè† Dashboard Appartements</h1>
                <span class="subtitle">Gestion de recherche de bien immobilier</span>
            </div>
            <div class="header-right">
                <!-- Mode Selector -->
                <div class="mode-selector">
                    <button class="mode-btn active" data-mode="achat" id="modeAchat">
                        üè¢ Achat
                    </button>
                    <button class="mode-btn" data-mode="location" id="modeLocation">
                        üîë Location
                    </button>
                </div>
                <button id="themeToggle" class="btn-icon" title="Changer le th√®me">
                    <span class="icon-theme">üåô</span>
                </button>
                <button id="addBtn" class="btn btn-primary">
                    <span class="icon">‚ûï</span> Nouveau Bien
                </button>
            </div>
        </header>

        <!-- Stats Dashboard -->
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-icon">üèòÔ∏è</div>
                <div class="stat-content">
                    <div class="stat-value" id="totalBiens">0</div>
                    <div class="stat-label">Total Biens</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon status-voir">üëÄ</div>
                <div class="stat-content">
                    <div class="stat-value" id="statVoir">0</div>
                    <div class="stat-label">√Ä Voir</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon status-vu">‚úÖ</div>
                <div class="stat-content">
                    <div class="stat-value" id="statVu">0</div>
                    <div class="stat-label">Vus</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon status-retenu">‚≠ê</div>
                <div class="stat-content">
                    <div class="stat-value" id="statRetenu">0</div>
                    <div class="stat-label">Retenus</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon status-refuse">‚ùå</div>
                <div class="stat-content">
                    <div class="stat-value" id="statRefuse">0</div>
                    <div class="stat-label">Refus√©s</div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-container">
            <div class="chart-card">
                <h3>üìç R√©partition par Quartier</h3>
                <canvas id="quartierChart"></canvas>
            </div>
            <div class="chart-card">
                <h3>üè∑Ô∏è R√©partition par DPE</h3>
                <canvas id="dpeChart"></canvas>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters-section">
            <div class="filters-header">
                <h2>üîç Filtres</h2>
                <button id="clearFilters" class="btn btn-secondary">Effacer</button>
            </div>
            <div class="filters-grid">
                <div class="filter-group">
                    <label>Prix (‚Ç¨)</label>
                    <div class="filter-range">
                        <input type="number" id="prixMin" placeholder="Min" class="filter-input">
                        <span>-</span>
                        <input type="number" id="prixMax" placeholder="Max" class="filter-input">
                    </div>
                </div>
                <div class="filter-group">
                    <label>Surface (m¬≤)</label>
                    <div class="filter-range">
                        <input type="number" id="surfaceMin" placeholder="Min" class="filter-input">
                        <span>-</span>
                        <input type="number" id="surfaceMax" placeholder="Max" class="filter-input">
                    </div>
                </div>
                <div class="filter-group">
                    <label>Pi√®ces</label>
                    <select id="piecesFilter" class="filter-select">
                        <option value="">Tous</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5+</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Quartier</label>
                    <select id="quartierFilter" class="filter-select">
                        <option value="">Tous</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>DPE</label>
                    <div class="filter-checkboxes" id="dpeFilter">
                        <label><input type="checkbox" value="A"> A</label>
                        <label><input type="checkbox" value="B"> B</label>
                        <label><input type="checkbox" value="C"> C</label>
                        <label><input type="checkbox" value="D"> D</label>
                        <label><input type="checkbox" value="E"> E</label>
                        <label><input type="checkbox" value="F"> F</label>
                        <label><input type="checkbox" value="G"> G</label>
                    </div>
                </div>
                <div class="filter-group">
                    <label>√âtat</label>
                    <div class="filter-checkboxes" id="etatFilter">
                        <label><input type="checkbox" value="√Ä voir"> √Ä voir</label>
                        <label><input type="checkbox" value="Vu"> Vu</label>
                        <label><input type="checkbox" value="Retenu"> Retenu</label>
                        <label><input type="checkbox" value="Refus√©"> Refus√©</label>
                    </div>
                </div>
                <div class="filter-group">
                    <label>Charges</label>
                    <div class="charges-toggle">
                        <button class="charges-toggle-btn active" id="chargesMensuelles" data-mode="mensuelles">
                            Mensuelles
                        </button>
                        <button class="charges-toggle-btn" id="chargesAnnuelles" data-mode="annuelles">
                            Annuelles
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Table -->
        <div class="table-section">
            <div class="table-header">
                <h2>üìã Liste des Biens</h2>
                <button id="exportBtn" class="btn btn-secondary">
                    <span class="icon">üì•</span> Export CSV
                </button>
            </div>
            <div class="table-wrapper">
                <table class="data-table" id="biensTable">
                    <thead>
                        <tr>
                            <th data-sort="quartier" class="sortable">Quartier<span class="sort-icon"></span></th>
                            <th data-sort="type" class="sortable">Type<span class="sort-icon"></span></th>
                            <th id="thPrix" data-sort="loyer" class="sortable">Prix<span class="sort-icon"></span></th>
                            <th data-sort="surface" class="sortable">Surface<span class="sort-icon"></span></th>
                            <th>Meubl√©</th>
                            <th>Nb Pi√®ces</th>
                            <th id="thPrixM2" data-sort="prixM2" class="sortable">Prix/m¬≤<span class="sort-icon"></span></th>
                            <th id="thCharges" data-sort="charges" class="sortable">Charges<span class="sort-icon"></span></th>
                            <th data-sort="dpe" class="sortable">DPE<span class="sort-icon"></span></th>
                            <th>√âtat</th>
                            <th>√âquipements</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="biensTableBody">
                        <!-- Data will be inserted here -->
                    </tbody>
                </table>
            </div>
            <div id="noResults" class="no-results" style="display: none;">
                <p>üòï Aucun bien ne correspond aux filtres</p>
            </div>
        </div>
    </div>

    <!-- Modal Add/Edit -->
    <div id="bienModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">‚ûï Nouveau Bien</h2>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <form id="bienForm" class="modal-body">
                <input type="hidden" id="bienId">
                
                <div class="form-section">
                    <h3>üìç Informations G√©n√©rales</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="quartier">Quartier *</label>
                            <input type="text" id="quartier" required class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="type">Type *</label>
                            <select id="type" required class="form-select">
                                <option value="">S√©lectionner</option>
                                <option value="T1">T1</option>
                                <option value="T2">T2</option>
                                <option value="T3">T3</option>
                                <option value="T4">T4</option>
                                <option value="T5">T5</option>
                                <option value="Studio">Studio</option>
                                <option value="Duplex">Duplex</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="prix" id="labelPrix">Prix (‚Ç¨) *</label>
                            <input type="number" id="prix" required class="form-input">
                        </div>
                        <div class="form-group" id="depotGarantieGroup" style="display: none;">
                            <label for="depotGarantie">D√©p√¥t de Garantie (‚Ç¨)</label>
                            <input type="number" id="depotGarantie" class="form-input" placeholder="Calcul√© automatiquement (2x loyer)">
                        </div>
                        <div class="form-group">
                            <label for="surface">Surface (m¬≤) *</label>
                            <input type="number" id="surface" required class="form-input" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="pieces">Nb Pi√®ces *</label>
                            <input type="number" id="pieces" required class="form-input" min="1">
                        </div>
                        <div class="form-group">
                            <label for="meubl√©">Meubl√©</label>
                            <select id="meubl√©" class="form-select">
                                <option value="false">Non</option>
                                <option value="true">Oui</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="dpe">DPE *</label>
                            <select id="dpe" required class="form-select">
                                <option value="">S√©lectionner</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="G">G</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üîß D√©tails</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="chauffage">Type de Chauffage</label>
                            <select id="chauffage" class="form-select">
                                <option value="">Non sp√©cifi√©</option>
                                <option value="Gaz">Gaz</option>
                                <option value="√âlectrique">√âlectrique</option>
                                <option value="Fuel">Fuel</option>
                                <option value="Bois">Bois</option>
                                <option value="Pompe √† chaleur">Pompe √† chaleur</option>
                                <option value="Collectif">Collectif</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="charges" id="labelCharges">Charges Annuelles (‚Ç¨)</label>
                            <input type="number" id="charges" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="etat">√âtat *</label>
                            <select id="etat" required class="form-select">
                                <optgroup label="Location" id="etatLocationGroup">
                                    <option value="Nouveau">üîµ Nouveau</option>
                                    <option value="Contact√©">üü° Contact√©</option>
                                    <option value="En attente de rappel">üü† En attente de rappel</option>
                                    <option value="Rendez-vous visite">üü£ Rendez-vous visite</option>
                                    <option value="Il faut appeler">ü©∫ Il faut appeler</option>
                                    <option value="Refus√©">üî¥ Refus√©</option>
                                </optgroup>
                                <optgroup label="Achat" id="etatAchatGroup">
                                    <option value="√Ä voir">√Ä voir</option>
                                    <option value="Vu">Vu</option>
                                    <option value="Retenu">Retenu</option>
                                    <option value="Refus√©">Refus√©</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üöó √âquipements</h3>
                    <div class="form-checkboxes">
                        <label><input type="checkbox" id="parking"> Parking</label>
                        <label><input type="checkbox" id="cave"> Cave</label>
                        <label><input type="checkbox" id="terrasse"> Terrasse</label>
                        <label><input type="checkbox" id="clim"> Climatisation</label>
                        <label><input type="checkbox" id="ascenseur"> Ascenseur</label>
                        <label><input type="checkbox" id="balcon"> Balcon</label>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üìÖ Dates & Contact</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="datePublication">Date Publication</label>
                            <input type="date" id="datePublication" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="dateContact">Date Prise de Contact</label>
                            <input type="date" id="dateContact" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="dateVisite">Date Visite</label>
                            <input type="date" id="dateVisite" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="contact">Contact</label>
                            <input type="text" id="contact" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="tel">T√©l√©phone</label>
                            <input type="tel" id="tel" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="siteWeb">Site Web</label>
                            <input type="url" id="siteWeb" class="form-input">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üìù Adresse & Notes</h3>
                    <div class="form-group">
                        <label for="adresse">Adresse</label>
                        <input type="text" id="adresse" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="notes">Notes</label>
                        <textarea id="notes" class="form-textarea" rows="3"></textarea>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="modalCancel">Annuler</button>
                    <button type="submit" class="btn btn-primary">üíæ Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal View Details -->
    <div id="viewModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>üìã D√©tails du Bien</h2>
                <button class="modal-close" id="viewClose">&times;</button>
            </div>
            <div class="modal-body" id="viewContent">
                <!-- Details will be inserted here -->
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
